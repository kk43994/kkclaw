# 🦞 Claw Desktop Pet

<div align="center">

![Version](https://img.shields.io/badge/version-2.0.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![Stability](https://img.shields.io/badge/stability-7×24-success)
![Platform](https://img.shields.io/badge/platform-Windows-blue)

**空气感桌面龙虾智能助手 — 像桌面歌词一样，不妨碍操作的AI伙伴**

集成 OpenClaw AI、MiniMax 语音克隆、流体玻璃球UI、桌面歌词效果

[快速开始](#-快速开始) • [功能特性](#-核心亮点) • [更新日志](#-更新日志) • [文档](#-文档)

</div>

---

## 📸 预览

<div align="center">

![V2.0 空气感UI](docs/images/v2-preview.jpg)

*67px 流体玻璃球 + 桌面歌词 + 自发光文字 — 像空气一样融入桌面 🦞*

</div>

---

## ✨ V2.0 核心亮点

<table>
<tr>
<td width="50%">

### 🫧 空气感双窗口
- 精灵窗口 (200×220) — 流体球+工具栏
- 歌词窗口 (400×100) — 桌面歌词效果
- 完全鼠标穿透，不妨碍操作
- 拖动时两窗口同步移动

</td>
<td width="50%">

### 👀 15+种眼睛表情
- 胶囊形白色发光眼睛 (Bunny Hole风格)
- 眨眼、开心、惊讶、好奇、思考...
- 待机微表情随机触发
- 鼠标跟随注视

</td>
</tr>
<tr>
<td width="50%">

### 🎨 7种情绪色系
- 🔴 idle — 红橙流体 (默认)
- 🟡 happy — 金橙流体
- 🩷 talking — 粉红流体
- 🔵 thinking — 蓝紫流体
- 🩶 sleepy — 灰粉流体
- 🟠 surprised — 金黄流体
- ⚫ offline — 灰色无力 + 复活动画

</td>
<td width="50%">

### 🎤 MiniMax 语音克隆
- 小团团克隆音色 (speech-2.5-turbo)
- 7种情感控制 (happy/sad/angry...)
- 自动情感识别
- 三级降级: MiniMax → CosyVoice → Edge TTS

</td>
</tr>
<tr>
<td width="50%">

### 🎵 桌面歌词效果
- 白色自发光文字
- 打字机逐字出现 (35ms/字)
- 等语音播完后优雅淡出
- 0.8s 缓动消失动画

</td>
<td width="50%">

### 🛡️ 企业级稳定性
- 全局错误处理 (5种错误捕获)
- 崩溃自动恢复
- 性能监控 + 健康评分
- 日志轮转 + 缓存清理

</td>
</tr>
</table>

---

## 🚀 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                   🦞 桌面龙虾 v2.0.0                     │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────── 精灵窗口 (200×220) ──────┐  ┌─ 歌词窗口 ──┐  │
│  │  67px 流体玻璃球                 │  │  桌面歌词     │  │
│  │  • 7色流体动画                   │  │  • 打字机     │  │
│  │  • 15+种眼睛表情                 │  │  • 自发光     │  │
│  │  • SVG图标工具栏                 │  │  • 鼠标穿透   │  │
│  │  • 离线灰色/上线复活             │  │  • 优雅淡出   │  │
│  └──��──────────────────────────────┘  └──────────────┘  │
│                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ 🎤 MiniMax    │  │ 🛡️ 稳定系统   │  │ 📊 性能监控   │  │
│  │ 语音克隆      │  │ 错误处理     │  │ 健康评分     │  │
│  │ 情感控制      │  │ 自动恢复     │  │ 异常告警     │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
│                                                          │
├─────────────────────────────────────────────────────────┤
│         ⚡ OpenClaw AI • 🎨 Electron • 🔊 MiniMax        │
└─────────────────────────────────────────────────────────┘
```

---

## ⚡ 快速开始

### 最简安装 (3步)

```bash
# 1️⃣ 克隆项目
git clone https://github.com/kk43994/claw-desktop-pet.git
cd claw-desktop-pet

# 2️⃣ 安装依赖
npm install

# 3️⃣ 启动
npm start
```

### 完整功能 (含AI+语音)

```bash
# 1-2步同上

# 3️⃣ 安装 OpenClaw
npm install -g openclaw

# 4️⃣ 启动 Gateway
openclaw gateway start

# 5️⃣ 配置 MiniMax API Key (可选)
# 在 pet-config.json 中设置 minimax.apiKey

# 6️⃣ 启动龙虾
npm start
```

**✨ 首次启动:**
- 🩶 龙虾以灰色离线状态出现
- 🔴 连接成功后复活动画 (灰→彩色 + 粒子爆散)
- 🎵 歌词窗口浮现在球体上方
- 🎤 语音系统就绪

---

## 📦 功能特性

### 🎨 UI系统
- ✅ **流体玻璃球** — 67px，7种情绪色系，60fps动画
- ✅ **胶囊眼睛** — 15+种表情，鼠标跟随，自然眨眼
- ✅ **桌面歌词** — 白色自发光，打字机效果，鼠标穿透
- ✅ **SVG图标工具栏** — 💬发消息 🎤语音 📸截图，hover展开
- ✅ **离线/上线动画** — 灰色无力→彩色复活+粒子爆散
- ✅ **Windows透明修复** — disableHardwareAcceleration

### 🎤 语音系统
- ✅ **MiniMax 克隆音色** — 小团团克隆，speech-2.5-turbo
- ✅ **7种情感控制** — happy/sad/angry/fearful/disgusted/surprised/calm
- ✅ **自动情感识别** — 根据文本内容自动选择emotion
- ✅ **三级降级** — MiniMax → CosyVoice → Edge TTS
- ✅ **停顿控制** — `<#0.5#>` 文本中插入停顿

### 🛡️ 稳定性系统
- ✅ **全局错误处理** — 5种错误类型全捕获
- ✅ **崩溃自动恢复** — 渐进式延迟重启
- ✅ **性能监控** — 实时健康评分，异常告警
- ✅ **日志轮转** — 自动清理30天以上日志
- ✅ **缓存清理** — 6小时自动清理语音/截图缓存
- ✅ **Gateway守护** — 自动检测并重启Gateway

### 💬 交互功能
- ✅ **AI对话** — 集成OpenClaw，输入条发送消息
- ✅ **飞书同步** — 飞书消息 ↔️ 桌面通知+语音播报
- ✅ **截图系统** — 一键截图发送到飞书
- ✅ **三击查看历史** — 三击球体在歌词窗口显示最近消息
- ✅ **托盘菜单** — 服务管理+恢复Session+退出

---

## 📊 性能指标

| 指标 | 数值 | 说明 |
|------|------|------|
| 内存占用 | ~60MB | 含监控数据 |
| CPU占用 | <1% | 正常运行 |
| 启动时间 | ~3秒 | 含语音初始化 |
| 球体帧率 | 60fps | requestAnimationFrame |
| 语音延迟 | ~3秒 | MiniMax TTS生成 |
| 语音成本 | 2元/万字 | speech-2.5-turbo |

---

## 🛠️ 技术��

<div align="center">

| 技术 | 用途 |
|------|------|
| **Electron** | 桌面应用框架 (双窗口) |
| **OpenClaw** | AI 对话引擎 |
| **MiniMax Speech** | 语音克隆+情感TTS |
| **CosyVoice** | 备用TTS引擎 |
| **Node.js** | 后端运行时 |
| **HTML/CSS/JS** | 前端界面 (纯代码动画) |

</div>

---

## 📝 更新日志

### v2.0.0 (2026-02-08) 🎨 空气感UI重构

<details>
<summary>查看详情</summary>

**全新UI架构:**
- 🫧 双窗口架构 (精灵+歌词)
- 👀 流体玻璃球 67px + 胶囊眼睛 15+表情
- 🎵 桌面歌词效果 (打字机+自发光+鼠标穿透)
- 🎨 SVG线条图标工具栏
- ⚫ 离线灰色状态 + 上线复活动画
- 🔧 Windows透明窗口修复

**语音升级:**
- 🎤 MiniMax Speech 2.5 Turbo 语音克隆
- 🎭 7种情感自动控制
- 📉 三级降级保障

**设计理念:**
- iOS简约风，空气感UI
- 参考: Nomi机器人 + AIBI机器人 + Bunny Hole
- 像桌面歌词一样不妨碍操作

</details>

### v1.4.0 (2026-02-07) ✨

<details>
<summary>查看详情</summary>

- 🎙️ 智能语音音调优化
- 🐛 修复重复播报问题
- ⚡ 语音播报时长限制增加到800字

</details>

### v1.3.0 (2026-02-06) 🚀

<details>
<summary>查看详情</summary>

- ✨ 全局错误处理系统
- ✨ 自动重启机制
- ✨ 性能监控系统
- ✨ 日志轮转管理
- ✨ 缓存清理系统
- ✨ 智能语音系统

</details>

---

## 📄 许可证

MIT License

---

## 👨‍💻 作者

- **zhouk (kk43994)** - 开发者
- **小K (AI)** - 灵魂设计师 🦞

---

<div align="center">

**⭐ 如果喜欢，请给个 Star！**

**🦞 空气感桌面龙虾 — 你的AI伙伴**

Made with ❤️ and 🦞

[⬆ 回到顶部](#-claw-desktop-pet)

</div>
